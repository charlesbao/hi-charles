<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>react-flight - build animation compositions for React | Hi!Charles</title>
<meta name="keywords" content="github, javascript, react">
<meta name="description" content="
react-flight is the best way to build animation compositions for React.
">
<meta name="author" content="">
<link rel="canonical" href="/post/react-flight/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css" integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U&#43;6hYRq/Ez/nm5vg=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="mask-icon" href="/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="react-flight - build animation compositions for React" />
<meta property="og:description" content="
react-flight is the best way to build animation compositions for React.
" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/react-flight/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-06-21T09:57:26+08:00" />
<meta property="article:modified_time" content="2021-06-21T09:57:26+08:00" /><meta property="og:site_name" content="Hi!Charles" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="react-flight - build animation compositions for React"/>
<meta name="twitter:description" content="
react-flight is the best way to build animation compositions for React.
"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "/post/"
    }
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "react-flight - build animation compositions for React",
      "item": "/post/react-flight/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "react-flight - build animation compositions for React",
  "name": "react-flight - build animation compositions for React",
  "description": " react-flight is the best way to build animation compositions for React.\n",
  "keywords": [
    "github", "javascript", "react"
  ],
  "articleBody": " react-flight is the best way to build animation compositions for React.\nofficial website Check out the new video: React Flight in Three Minutes Quick Start (From Scratch) Just clone and use the example, built around create-react-app:\n$ git clone https://github.com/jondot/react-flight $ cd react-flight/examples/compos $ yarn \u0026\u0026 yarn start Quick Start (Existing Project) With yarn (or npm):\n$ yarn add react-flight $ curl https://raw.githubusercontent.com/jondot/react-flight/master/examples/compos/src/index.js -o src/anim.js And now you can frame your compositions in anim.js, require and place it in any other React component.\nNext:\nAdd jQuery (or Zepto, or any jQuery drop-in) if you don’t have it already in the project. Or if you use create-react-app you can add it to your public/index.html, like here, or eject and configure webpack for jQuery. NOTE: jQuery is currently a requirement of one of react-flight’s dependencies. We plan to rebuild that dependency any way, obsoleting this requirement in the process (also: PRs accepted!).\nWorkflow When you’re designing compositions, focus on designing frames. The first frame is marked source because that’s the starting point, and interactive because you want to play with it while you go.\n\u003cFlight interactive ref={flight =\u003e (this.flight = flight)}\u003e \u003cFlight.Frame duration={300} source interactive showFrames\u003e Showing Frames While designing, you want to have showFrames on. It will unpack all of the frames in front of you, so you could edit them while watching them. With Webpack hot-reload this becomes a fantastic experience.\nWhen done, remove showFrames.\nControlling Flight Directly This is where the ref addition comes in:\n\u003cFlight interactive ref={flight =\u003e (this.flight = flight)}\u003e \u003cFlight.Frame duration={300} source interactive showFrames\u003e Once you can grab an instance of flight you can flight.play() and flight.reset() on demand from your own components and actions.\nHere’s a full layout:\n\u003cFlight interactive ref={flight =\u003e (this.flight = flight)}\u003e \u003cFlight.Frame duration={300} source interactive showFrames\u003e -- your own DOM / React Components --- -- starting position and styles --- \u003c/Flight.Frame\u003e \u003cFlight.Frame\u003e -- your own DOM / React Components --- -- ending position and styles --- \u003c/Flight.Frame\u003e \u003c/Flight\u003e Redux If you’re using Redux, there’s basic support for it. Basic in the sense that react-flight is not going to handle deep renders of a stateful app with all its gotchas, so YMMV.\nYou can check out this Redux example for a fully working solution.\nFor your app, you can enable Redux support by indicating inclusion of store before using the Flight component:\nFlight.contextTypes = { store: PropTypes.object, } Flight.childContextTypes = { ...Flight.childContextTypes, store: PropTypes.object, } ",
  "wordCount" : "403",
  "inLanguage": "en",
  "datePublished": "2021-06-21T09:57:26+08:00",
  "dateModified": "2021-06-21T09:57:26+08:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "/post/react-flight/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Hi!Charles",
    "logo": {
      "@type": "ImageObject",
      "url": "/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="/" accesskey="h" title="Hi!Charles (Alt + H)">Hi!Charles</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      react-flight - build animation compositions for React
    </h1>
    <div class="post-meta"><span title='2021-06-21 09:57:26 +0800 CST'>June 21, 2021</span>

</div>
  </header> 
  <div class="post-content"><blockquote>
<p><a href="https://github.com/jondot/react-flight">react-flight</a> is the best way to build animation compositions for React.</p>
</blockquote>
<p><img loading="lazy" src="https://github.com/jondot/react-flight/raw/master/media/flight.png" alt=""  />
</p>
<h3 id="official-websitehttpreact-flightio"><a href="http://react-flight.io">official website</a><a hidden class="anchor" aria-hidden="true" href="#official-websitehttpreact-flightio">#</a></h3>
<p>Check out the new video:
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
<!-- raw HTML omitted -->
React Flight in Three Minutes
<!-- raw HTML omitted --></p>
<h2 id="quick-start-from-scratch">Quick Start (From Scratch)<a hidden class="anchor" aria-hidden="true" href="#quick-start-from-scratch">#</a></h2>
<p>Just clone and use the example, built around <code>create-react-app</code>:</p>
<pre tabindex="0"><code>$ git clone https://github.com/jondot/react-flight
$ cd react-flight/examples/compos
$ yarn &amp;&amp; yarn start
</code></pre><h2 id="quick-start-existing-project">Quick Start (Existing Project)<a hidden class="anchor" aria-hidden="true" href="#quick-start-existing-project">#</a></h2>
<p>With yarn (or npm):</p>
<pre tabindex="0"><code>$ yarn add react-flight
$ curl https://raw.githubusercontent.com/jondot/react-flight/master/examples/compos/src/index.js -o src/anim.js
</code></pre><p>And now you can frame your compositions in <code>anim.js</code>, require and place it in
any other React component.</p>
<p>Next:</p>
<ol>
<li>Add jQuery (or Zepto, or any jQuery drop-in) if you don&rsquo;t have it already in the project.</li>
<li>Or if you use <code>create-react-app</code> you can add it to your <code>public/index.html</code>, <a href="examples/compos/public/index.html">like here</a>,
or eject and <a href="https://webpack.github.io/docs/library-and-externals.html">configure webpack</a> for jQuery.</li>
</ol>
<p><em>NOTE</em>: jQuery is currently a requirement of one of <code>react-flight</code>&rsquo;s dependencies.
We plan to rebuild that dependency any way, obsoleting this requirement in the
process (also: PRs accepted!).</p>
<h2 id="workflow">Workflow<a hidden class="anchor" aria-hidden="true" href="#workflow">#</a></h2>
<p>When you&rsquo;re designing compositions, focus on designing frames. The
first frame is marked <code>source</code> because that&rsquo;s the starting point, and
<code>interactive</code> because you want to play with it while you go.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span>  &lt;<span style="color:#f92672">Flight</span> <span style="color:#a6e22e">interactive</span> <span style="color:#a6e22e">ref</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">flight</span> =&gt; (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">flight</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">flight</span>)}&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">Flight.Frame</span> <span style="color:#a6e22e">duration</span><span style="color:#f92672">=</span>{<span style="color:#ae81ff">300</span>} <span style="color:#a6e22e">source</span> <span style="color:#a6e22e">interactive</span> <span style="color:#a6e22e">showFrames</span>&gt;
</span></span></code></pre></div><h3 id="showing-frames">Showing Frames<a hidden class="anchor" aria-hidden="true" href="#showing-frames">#</a></h3>
<p>While designing, you want to have <code>showFrames</code> on. It will unpack
all of the frames in front of you, so you could edit them while watching them. With
Webpack hot-reload this becomes a fantastic experience.</p>
<p>When done, remove <code>showFrames</code>.</p>
<h3 id="controlling-flight-directly">Controlling Flight Directly<a hidden class="anchor" aria-hidden="true" href="#controlling-flight-directly">#</a></h3>
<p>This is where the <code>ref</code> addition comes in:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span>  &lt;<span style="color:#f92672">Flight</span> <span style="color:#a6e22e">interactive</span> <span style="color:#a6e22e">ref</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">flight</span> =&gt; (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">flight</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">flight</span>)}&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">Flight.Frame</span> <span style="color:#a6e22e">duration</span><span style="color:#f92672">=</span>{<span style="color:#ae81ff">300</span>} <span style="color:#a6e22e">source</span> <span style="color:#a6e22e">interactive</span> <span style="color:#a6e22e">showFrames</span>&gt;
</span></span></code></pre></div><p>Once you can grab an instance of <code>flight</code> you can <code>flight.play()</code> and <code>flight.reset()</code> on
demand from your own components and actions.</p>
<p>Here&rsquo;s a full layout:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-jsx" data-lang="jsx"><span style="display:flex;"><span>  &lt;<span style="color:#f92672">Flight</span> <span style="color:#a6e22e">interactive</span> <span style="color:#a6e22e">ref</span><span style="color:#f92672">=</span>{<span style="color:#a6e22e">flight</span> =&gt; (<span style="color:#66d9ef">this</span>.<span style="color:#a6e22e">flight</span> <span style="color:#f92672">=</span> <span style="color:#a6e22e">flight</span>)}&gt;
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">Flight.Frame</span> <span style="color:#a6e22e">duration</span><span style="color:#f92672">=</span>{<span style="color:#ae81ff">300</span>} <span style="color:#a6e22e">source</span> <span style="color:#a6e22e">interactive</span> <span style="color:#a6e22e">showFrames</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">--</span> <span style="color:#a6e22e">your</span> <span style="color:#a6e22e">own</span> <span style="color:#a6e22e">DOM</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">React</span> <span style="color:#a6e22e">Components</span> <span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">--</span> <span style="color:#a6e22e">starting</span> <span style="color:#a6e22e">position</span> <span style="color:#a6e22e">and</span> <span style="color:#a6e22e">styles</span>    <span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">Flight.Frame</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;<span style="color:#f92672">Flight.Frame</span>&gt;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">--</span> <span style="color:#a6e22e">your</span> <span style="color:#a6e22e">own</span> <span style="color:#a6e22e">DOM</span> <span style="color:#f92672">/</span> <span style="color:#a6e22e">React</span> <span style="color:#a6e22e">Components</span> <span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>      <span style="color:#f92672">--</span> <span style="color:#a6e22e">ending</span> <span style="color:#a6e22e">position</span> <span style="color:#a6e22e">and</span> <span style="color:#a6e22e">styles</span>    <span style="color:#f92672">---</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    &lt;/<span style="color:#f92672">Flight.Frame</span>&gt;
</span></span><span style="display:flex;"><span>  &lt;/<span style="color:#f92672">Flight</span>&gt;
</span></span></code></pre></div><h2 id="redux">Redux<a hidden class="anchor" aria-hidden="true" href="#redux">#</a></h2>
<p>If you&rsquo;re using Redux, there&rsquo;s basic support for it. Basic in the sense that <code>react-flight</code> is not
going to handle deep renders of a stateful app with all its gotchas, so YMMV.</p>
<p>You can check out <a href="examples/compos-redux">this Redux example</a> for a fully working solution.</p>
<p>For your app, you can enable Redux support by indicating inclusion of store before using the <code>Flight</code> component:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">Flight</span>.<span style="color:#a6e22e">contextTypes</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">store</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">PropTypes</span>.<span style="color:#a6e22e">object</span>,
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Flight</span>.<span style="color:#a6e22e">childContextTypes</span> <span style="color:#f92672">=</span> {
</span></span><span style="display:flex;"><span>  ...<span style="color:#a6e22e">Flight</span>.<span style="color:#a6e22e">childContextTypes</span>,
</span></span><span style="display:flex;"><span>  <span style="color:#a6e22e">store</span><span style="color:#f92672">:</span> <span style="color:#a6e22e">PropTypes</span>.<span style="color:#a6e22e">object</span>,
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="/tags/github/">github</a></li>
      <li><a href="/tags/javascript/">javascript</a></li>
      <li><a href="/tags/react/">react</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <section class="copyright"><a href="https://beian.miit.gov.cn">苏ICP备16024813号-3</a> | <a href="/">"Hi!Charles"为包涵个人的版权所有</a></section>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
